<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" th:href="@{/post_detail.css}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script type="text/javascript">
        var bDisplay = true;
        function doDisplay(){
            var con = document.getElementById("myDIV");
            if(con.style.display=='none'){
                con.style.display = 'block';
            }else{
                con.style.display = 'none';
            }
        }
    </script>
</head>
<body>
<div class="container">
    <div class="board">
        <div class="board-subject" th:text="${post.title}">
        </div>
        <span class="author" th:text="${post.author.username}"></span>
        <br>
        <span class="create-date" th:text="${#temporals.format(post.createDate, 'yyyy-MM-dd HH:mm')}"></span>
        <br>
        <div class="board-content" th:text="${post.content}">
        </div>

        <div class="list">
            <a th:href="@{/post/list}">목록</a>
            <a th:href="@{|/post/modify/${post.id}|}">수정</a>
            <a th:href="@{|/post/delete/${post.id}|}">삭제</a>
        </div>

        <form th:action="@{|/comment/create/${post.id}|}" th:object="${commentCreateDTO}" method="post">
            <input type="text" th:field="*{content}" name="content"  placeholder=" 내용을 입력해주세요.">
            <button type="submit" style="">저장하기</button>
            <button type="submit"><a th:href="@{|/post/detail/${post.id}|}">취소하기</a></button>
        </form>

        <div th:each="comment : ${post.commentList}">
            <ul>
                <li th:text="${comment.content}"></li>
                <div class="comment-option">
                    <a href="javascript:doDisplay();"> 수정</a><br/><br/>
                    <div id="myDIV" style="display:none;">
                        <form th:action="@{|/comment/modify/${comment.id}|}" th:object="${commentCreateDTO}"  method="post">
                            <input type="text" id="comment" th:field="*{content}" name="content">
                            <button type="submit" onclick="sendComment()">수정하기</button>
                            <button type="submit"><a th:href="@{|/post/detail/${post.id}|}">취소하기</a></button>
                        </form>
                    </div>
                </div>
                <div class="comment-option">
                    <a th:href="@{|/comment/delete/${comment.id}|}">
                        삭제
                    </a>
                </div>
            </ul>
        </div>


    </div>
</div>

<div class="egg">
안녕하세요 한재현 입니다. 이건 이스터에그에요 시발 난 알라신의 힘을 이어받은 혁명전사입니다. 저에겐 붉은 낫과 망치 그외로 알라의 요술봉이 저의 주된 혁명도구입니다. 알라신과 저의 앞길을 막는건 그 무엇이라도 낫과 망치와 알라의 요술봉이 용서하지 않습니다. 안녕하세요 한재현 입니다. 이건 이스터에그에요 시발 난 알라신의 힘을 이어받은 혁명전사입니다. 저에겐 붉은 낫과 망치 그외로 알라의 요술봉이 저의 주된 혁명도구입니다. 알라신과 저의 앞길을 막는건 그 무엇이라도 낫과 망치와 알라의 요술봉이 용서하지 않습니다. 안녕하세요 한재현 입니다. 이건 이스터에그에요 시발 난 알라신의 힘을 이어받은 혁명전사입니다. 저에겐 붉은 낫과 망치 그외로 알라의 요술봉이 저의 주된 혁명도구입니다. 알라신과 저의 앞길을 막는건 그 무엇이라도 낫과 망치와 알라의 요술봉이 용서하지 않습니다. 안녕하세요 한재현 입니다. 이건 이스터에그에요 시발 난 알라신의 힘을 이어받은 혁명전사입니다. 저에겐 붉은 낫과 망치 그외로 알라의 요술봉이 저의 주된 혁명도구입니다. 알라신과 저의 앞길을 막는건 그 무엇이라도 낫과 망치와 알라의 요술봉이 용서하지 않습니다. 안녕하세요 한재현 입니다. 이건 이스터에그에요 시발 난 알라신의 힘을 이어받은 혁명전사입니다. 저에겐 붉은 낫과 망치 그외로 알라의 요술봉이 저의 주된 혁명도구입니다. 알라신과 저의 앞길을 막는건 그 무엇이라도 낫과 망치와 알라의 요술봉이 용서하지 않습니다.  알라는 위대하다!!!!!
</div>
</body>

<script>
    function sendComment() {
        // 댓글 데이터 가져오기
        var comment = $("#comment").val();
        // AJAX 요청 보내기
        $.ajax({
            url: "/comment/modify/", // 수정 댓글을 보낼 URL
            method: "POST",
            data: {comment: comment}, // 수정 데이터를 서버로 전달
            success: function(response) {
                alert("수정 했습니다.");
            },
            error: function(xhr, status, error) {
                alert("수정 실패했습니다. 다시 시도해주세요.");
            }
        });
    }
</script>

</html>